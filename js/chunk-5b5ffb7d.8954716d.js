(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b5ffb7d"],{"051c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"lab3"}},[a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{span:18}},[a("el-card",{attrs:{id:"card-canvas","body-style":{padding:"8px"},shadow:"always"}},[a("Canvas")],1)],1),a("el-col",{attrs:{span:6}},[a("el-card",{attrs:{id:"card-panel",shadow:"always"}},[a("Panel")],1)],1)],1)],1)},i=[],s={fg:"#1A89FC",bg:"#ffffff",algo:"Xiaolin Wu",scale:4,cmd:"",line:{},rays:{}},l={},r={changeBg:function(t,e){t.bg=e},changeFg:function(t,e){t.fg=e},changeAlgo:function(t,e){t.algo=e},changeScale:function(t,e){t.scale=e},changeCmd:function(t,e){t.cmd=e},changeLine:function(t,e){t.line=e},changeRays:function(t,e){t.rays=e}},c={},o={namespaced:!0,state:s,mutations:r,actions:c,getters:l},h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[a("canvas",{ref:"background",staticStyle:{position:"absolute",left:"0",top:"0","z-index":"0"},attrs:{id:"background"}}),a("canvas",{ref:"canvas",staticStyle:{position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{id:"canvas"},on:{click:t.onCanvas}}),a("canvas",{ref:"chart",staticStyle:{position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{id:"chart"},on:{click:t.onCanvas}})])},u=[],f=(a("99af"),a("d81d"),a("fb6a"),a("d3b7"),a("25f0"),a("ddb0"),a("2909")),d=a("3835"),m=a("5530"),g=a("2f62"),p=a("30ef"),b=a.n(p),v={Builtin:"Built-in",DDA:"DDA",BresenhamInt:"Bresenham Interger",BresenhamFloat:"Bresenham Float",BresenhamAntialias:"Bresenham Anti-aliasing",XiaolinWu:"Xiaolin Wu"};function x(t,e,a,n){var i=[[t,e]],s=a-t,l=n-e,r=t,c=e,o=Math.max(Math.abs(s),Math.abs(l));s/=o,l/=o;for(var h=0;h<o;h+=1)r+=s,c+=l,i.push([Math.round(r),Math.round(c)]);return i}function y(t,e,a,n){var i=[[t,e]],s=a-t,l=n-e,r=t,c=e,o=l>0?1:-1,h=s>0?1:-1;if(s=Math.abs(s),l=Math.abs(l),s>l){l/=s;var u=2*l-1,f=2*l,d=-2;while(r!==a)u>=0&&(u+=d,c+=o),u+=f,r+=h,i.push([r,c])}else{s/=l;var m=2*s-1,g=2*s,p=-2;while(c!==n)m>=0&&(m+=p,r+=h),m+=g,c+=o,i.push([r,c])}return i}function w(t,e,a,n){var i=[[t,e]],s=a-t,l=n-e,r=t,c=e,o=l>0?1:-1,h=s>0?1:-1;if(s=Math.abs(s),l=Math.abs(l),s>l){var u=2*l-s,f=2*l,d=-2*s;while(r!==a)u>=0&&(u+=d,c+=o),u+=f,r+=h,i.push([r,c])}else{var m=2*s-l,g=2*s,p=-2*l;while(c!==n)m>=0&&(m+=p,r+=h),m+=g,c+=o,i.push([r,c])}return i}function k(t,e,a,n){var i=[[t,e,.5]],s=a-t,l=n-e,r=t,c=e,o=l>0?1:-1,h=s>0?1:-1;s=Math.abs(s),l=Math.abs(l);var u=.5;if(s>l){l/=s;var f=2*l-1,d=2*l,m=-2;while(r!==a)f>=0&&(f+=m,c+=o,u-=1),u+=l,f+=d,r+=h,i.push([r,c,u])}else{s/=l;var g=2*s-1,p=2*s,b=-2;while(c!==n)g>=0&&(g+=b,r+=h,u-=1),u+=s,g+=p,c+=o,i.push([r,c,u])}return i}function S(t,e,a,n){var i=[[t,e,1]],s=a-t,l=n-e,r=t,c=e,o=l>0?1:-1,h=s>0?1:-1;s=Math.abs(s),l=Math.abs(l);var u=0;if(s>l){l/=s;while(r!==a)u+=l,u>1&&(u-=1,c+=o),r+=h,i.push([r,c,1-u]),i.push([r,c+o,u])}else{s/=l;while(c!==n)u+=s,u>1&&(u-=1,r+=h),c+=o,i.push([r,c,1-u]),i.push([r+h,c,u])}return i}function M(t){var e,a=t[t.length-1][0]-t[0][0],n=t[t.length-1][1]-t[0][1],i=a>n?1:0;t.sort((function(t,e){return t[i]-e[i]}));for(var s=1,l=0,r=0;r<t.length;r+=1)t[r][i]===e?(l+=1,l>s&&(s=l)):(l=1,e=t[r][i]);return s}function C(t,e,a,n,i){var s,l,r;switch(t){case v.DDA:s=x;break;case v.BresenhamInt:s=w;break;case v.BresenhamFloat:s=y;break;case v.BresenhamAntialias:s=k;break;case v.XiaolinWu:s=S;break;default:break}l=window.performance.now();for(var c=0;c<1;c+=1)r=s(e,a,n,i);return l=window.performance.now()-l,[l,r,M(r)]}var D={name:"Canvas",computed:Object(m["a"])({},Object(g["c"])("l3",{fg:"fg",bg:"bg",algo:"algo",sscale:"scale",cmd:"cmd",line:"line",rays:"rays"}),{scale:{get:function(){return this.sscale},set:function(t){return t}}}),data:function(){return{time:[],testSize:Math.round(.12*window.innerWidth),colorScheme:["#ffce56","#36a2eb","#ff6384","#4bc0c0","#9966ff","#ff9f40"],algolist:[v.BresenhamInt,v.BresenhamFloat,v.BresenhamAntialias,v.DDA,v.XiaolinWu,v.Builtin]}},mounted:function(){var t=this,e=this.$el.clientHeight,a=this.$el.clientWidth;this.backctx=this.$refs.background.getContext("2d"),this.chartctx=this.$refs.chart.getContext("2d"),this.canvas=this.$refs.canvas,this.ctx=this.$refs.canvas.getContext("2d"),this.chartctx.canvas.width=a,this.chartctx.canvas.height=e,this.backctx.canvas.width=a,this.backctx.canvas.height=e,this.ctx.canvas.width=a,this.ctx.canvas.height=e,this.isDrawing=!1,this.ctx.scale(this.scale,this.scale),this.oldScale=this.scale,this.test2(),setTimeout(this.graph,2e3),setTimeout(this.graphMaxLen,5e3),setTimeout((function(){t.onClear(),t.test()}),8e3)},watch:{bg:function(t){this.backctx.fillStyle=t,this.backctx.fillRect(0,0,this.canvas.width,this.canvas.height)},fg:function(t){this.ctx.fillStyle=t},scale:function(t){this.changeScale(t)},cmd:function(t){switch(t){case"clear":this.onClear();break;case"graph":this.graph();break;case"maxlen":this.graphMaxLen();break;case"test1":this.onClear(),this.test();break;case"test2":this.onClear(),this.test2();break;case"drawLine":this.drawLineWrap(this.line.p1.x,this.line.p1.y,this.line.p2.x,this.line.p2.y);break;case"drawRays":this.drawRays(this.rays.center.x,this.rays.center.y,this.rays.angle,this.rays.len);break;default:break}}},methods:{putPixel:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if("undefined"!==typeof n){var i=Math.round(255*n);i=i<16?"0".concat(i.toString(16)):i.toString(16),this.ctx.fillStyle=t+i}else this.ctx.fillStyle=t;this.ctx.fillRect(e,a,1,1)},drawLineWrap:function(t,e,a,n){var i,s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.fg,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.algo;if(r===v.Builtin)this.drawLineBuiltin(t+.5,e+.5,a+.5,n+.5,l);else{s=C(r,t,e,a,n);var c=s,o=Object(d["a"])(c,2);i=o[0],s=o[1];for(var h=0;h<s.length;h+=1)this.putPixel.apply(this,[l].concat(Object(f["a"])(s[h])))}return this.ctx.fillStyle=this.fg,i},drawLineBuiltin:function(t,e,a,n,i){this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.moveTo(t,e),this.ctx.lineTo(a,n),this.ctx.stroke(),this.ctx.closePath()},drawRays:function(t,e,a,n){for(var i,s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.fg,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.algo,c=0,o=0;o<360;o+=a)i=t+Math.round(n*Math.cos(Math.PI*o/180)),s=e+Math.round(n*Math.sin(Math.PI*o/180)),c+=this.drawLineWrap(t,e,i,s,l,r);return c},onCanvas:function(t){var e=this.canvas.getClientRects()["0"],a=Math.floor((t.clientX-e.left)/this.scale),n=Math.floor((t.clientY-e.top)/this.scale);this.ctx.fillRect(a,n,1,1),this.isDrawing?this.drawLineWrap(this.canvas.x,this.canvas.y,a,n):(this.canvas.x=a,this.canvas.y=n),this.isDrawing=!this.isDrawing},onClear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ctx;t.clearRect(0,0,t.canvas.width,t.canvas.height),this.chart&&this.chart.destroy()},changeScale:function(t){this.ctx.scale(1/this.oldScale*t,1/this.oldScale*t),this.oldScale=t},graph:function(){this.chart&&this.chart.destroy(),this.time=[0,0,0,0,0];for(var t=0;t<8;t+=1)this.test();this.onClear(),this.chart=new b.a(this.chartctx,{type:"bar",data:{labels:this.algolist.slice(0,5),datasets:[{label:"Time compare (run test 8 times)",data:this.time,backgroundColor:this.colorScheme.map((function(t){return"".concat(t,"80")})),borderColor:this.colorScheme,borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},graphMaxLen:function(){var t,e;this.onClear(),this.chart&&this.chart.destroy(),this.time=[0,0,0,0,0];for(var a=99,n=[],i=0;i<5;i+=1){var s={};s.label=this.algolist[i],s.borderColor=this.colorScheme[i],s.fill=!1,s.data=[];for(var l=0;l<=90;l+=1)t=Math.round(a*Math.cos(Math.PI*l/180)),e=Math.round(a*Math.sin(Math.PI*l/180)),s.data.push({x:l,y:C(this.algolist[i],0,0,t,e)[2]});n.push(s)}this.onClear(),this.chart=new b.a(this.chartctx,{type:"line",data:{labels:Object(f["a"])(Array(91).keys()),datasets:n},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},title:{display:!1,text:"Max length compare"}}})},test:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.round(this.scale/2);this.changeScale(t);for(var e=this.testSize/t,a=6,n=e-10,i=[[e,e],[3*e,e],[5*e,e],[e,3*e],[3*e,3*e],[5*e,3*e]],s=0;s<6;s+=1)this.ctx.fillStyle=this.colorScheme[s],this.ctx.fillText(this.algolist[s],i[s][0],i[s][1]-n),this.time[s]+=this.drawRays.apply(this,Object(f["a"])(i[s]).concat([a,n,this.colorScheme[s],this.algolist[s]]));this.changeScale(this.scale)},test2:function(){var t=Math.round(window.innerHeight/48),e=Math.round(window.innerWidth/11.2),a=0;this.changeScale(2);for(var n=0;n<6;n+=1)this.ctx.fillStyle=this.colorScheme[n],this.ctx.fillText(this.algolist[n],8,4*a+40),this.changeScale(8),this.drawLineWrap(2,a+3,e,a+9,this.colorScheme[n],this.algolist[n]),this.changeScale(2),this.drawLineWrap(8,4*a,4*e,4*a+24,this.colorScheme[n],this.algolist[n]),a+=t;this.changeScale(this.scale)}}},A=D,B=(a("3ed8"),a("2877")),L=Object(B["a"])(A,h,u,!1,null,"5d42f012",null),$=L.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Background"}},[a("el-color-picker",{attrs:{value:t.bg},on:{change:t.changeBg}})],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Foreground"}},[a("el-color-picker",{attrs:{value:t.fg,"show-alpha":""},on:{change:t.changeFg}})],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-select",{attrs:{value:t.algo,placeholder:"Select Algorithm",label:"DDA"},on:{change:t.changeAlgo}},t._l(t.lineAlgo,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),a("span",{staticClass:"input-label"},[t._v("Draw Line")]),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1400},model:{value:t.line.p1.x,callback:function(e){t.$set(t.line.p1,"x",e)},expression:"line.p1.x"}})],1),a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1400},model:{value:t.line.p1.y,callback:function(e){t.$set(t.line.p1,"y",e)},expression:"line.p1.y"}})],1)],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1400},model:{value:t.line.p2.x,callback:function(e){t.$set(t.line.p2,"x",e)},expression:"line.p2.x"}})],1),a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1400},model:{value:t.line.p2.y,callback:function(e){t.$set(t.line.p2,"y",e)},expression:"line.p2.y"}})],1)],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onDrawLine}},[t._v("Draw Line")])],1)],1),a("span",{staticClass:"input-label"},[t._v("Draw Rays")]),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1400},model:{value:t.rays.center.x,callback:function(e){t.$set(t.rays.center,"x",e)},expression:"rays.center.x"}})],1),a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:1e3},model:{value:t.rays.center.y,callback:function(e){t.$set(t.rays.center,"y",e)},expression:"rays.center.y"}})],1)],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{step:5,min:5,max:180},model:{value:t.rays.angle,callback:function(e){t.$set(t.rays,"angle",e)},expression:"rays.angle"}})],1),a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:10,max:500},model:{value:t.rays.len,callback:function(e){t.$set(t.rays,"len",e)},expression:"rays.len"}})],1)],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-popover",{attrs:{placement:"bottom",title:"Draw Rays",width:"200",trigger:"hover",content:"Center.x Center.y Angle Length"}},[a("el-button",{attrs:{slot:"reference",type:"primary"},on:{click:t.onDrawRays},slot:"reference"},[t._v("Draw Rays")])],1)],1)],1),a("el-slider",{attrs:{value:t.scale,min:1,max:8,step:1,"show-stops":""},on:{input:t.changeScale}}),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.cmd="clear"}}},[t._v("Clear All")])],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.cmd="graph"}}},[t._v("Compare Time")])],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.cmd="maxlen"}}},[t._v("Max length")])],1)],1),a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cmd="test1"}}},[t._v("Test 1")]),a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.cmd="test2"}}},[t._v("Test 2")])],1)],1)],1)},W=[],_={name:"Panel",computed:Object(m["a"])({},Object(g["c"])("l3",{fg:"fg",bg:"bg",algo:"algo",scale:"scale"})),data:function(){return{cmd:"",line:{p1:{x:0,y:0},p2:{x:300,y:100}},rays:{center:{x:120,y:120},angle:5,len:120}}},created:function(){this.lineAlgo=v},methods:Object(m["a"])({},Object(g["b"])("l3",["changeBg","changeFg","changeAlgo","changeScale","changeCmd","changeLine","changeRays"]),{onDrawLine:function(){this.changeLine(this.line),this.cmd="drawLine"},onDrawRays:function(){this.changeRays(this.rays),this.cmd="drawRays"}}),watch:{cmd:function(t){this.changeCmd(t),this.cmd=""}}},j=_,O=(a("0906"),Object(B["a"])(j,R,W,!1,null,"52b786f6",null)),P=O.exports,T={name:"lab3",components:{Canvas:$,Panel:P},created:function(){this.$store.registerModule("l3",o)},beforeDestroy:function(){this.$store.unregisterModule("l3")}},F=T,I=(a("f05d"),Object(B["a"])(F,n,i,!1,null,null,null));e["default"]=I.exports},"0906":function(t,e,a){"use strict";var n=a("7242"),i=a.n(n);i.a},"3a01":function(t,e,a){},"3ed8":function(t,e,a){"use strict";var n=a("3a01"),i=a.n(n);i.a},"59fe":function(t,e,a){},7242:function(t,e,a){},f05d:function(t,e,a){"use strict";var n=a("59fe"),i=a.n(n);i.a}}]);